var l=(s,i,t)=>new Promise((c,o)=>{var u=e=>{try{n(t.next(e))}catch(a){o(a)}},m=e=>{try{n(t.throw(e))}catch(a){o(a)}},n=e=>e.done?c(e.value):Promise.resolve(e.value).then(u,m);n((t=t.apply(s,i)).next())});import{l as S,m as T,k as F,n as v,d as B,o as C,u as w}from"./main.a64bc0d4.js";import{y as x,a as y,w as R,o as A,B as E,E as h,G as _,u as k,H as f}from"./_plugin-vue_export-helper.1c13e0b0.js";const{wsCache:I}=S(),U=T({id:"user",state:()=>({permissions:[],roles:[],user:{id:0,avatar:"",nickname:""}}),persist:{enabled:!0},getters:{getUserInfo(){return this}},actions:{setUserInfo(s){this.resetState(),this.permissions=s.permissions,this.roles=s.roles,this.user=s.user,I.set("user",s)},resetState(){this.permissions=[],this.roles=[],this.user={id:0,avatar:"",nickname:""}}}}),b={class:"text-center mt-30"},D=f(" \u4F60\u8FD8\u6CA1\u6709\u767B\u9646\u54E6\uFF0C\u73B0\u5728 "),N=f("\uFF1F "),G=x({__name:"Login",setup(s){const{t:i}=B(),t=F(),c=U(),o=v(),u=y(""),{currentRoute:m,addRoute:n,push:e}=w(),a={id:1,accessToken:"accessToken7",refreshToken:"refreshToken7",userId:1,userType:1,clientId:"7",expiresTime:new Date().getTime()+3600},p={user:{id:1,nickname:"leon"},permissions:["user.message"],roles:[]},g=()=>l(this,null,function*(){c.setUserInfo(p),C(a),yield o.generateRoutes(p.permissions),o.getAddRouters.forEach(r=>{n(r)}),e({path:"/user/message"})});return R(()=>m.value,r=>{var d;u.value=(d=r==null?void 0:r.query)==null?void 0:d.redirect},{immediate:!0}),(r,d)=>(A(),E("div",b,[h("div",null,_(k(t).getAppName),1),D,h("button",{class:"btn",onClick:g},_(k(i)("common.login")),1),N]))}});export{G as default};
